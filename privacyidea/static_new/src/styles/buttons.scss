@use "@angular/material" as mat;

$button-height: 40px;
$button-width: 240px;
$keyword-height: 28px;
$keyword-padding: 2px 8px;
$button-gap-small: 10px;
$padding-horizontal: 16px;
$detail-icon-font-size: 18px;
$margin-bottom-small: -6px;
$keyword-font-size: 18px;
$button-border-radius: var(--border-radius);
$profile-bg: var(--background-yellow);
$profile-hover-bg: var(--background-yellow-inset);
$background-low-contrast: linear-gradient(
  145deg,
  var(--mat-sys-surface-container-highest),
  var(--mat-sys-surface-container-low)
);

$button-low-contrast-variant: linear-gradient(
  145deg,
  var(--mat-sys-surface-container-low),
  var(--mat-sys-surface-container-highest)
);

// Mixins for common button styles
@mixin button-base(
  $height,
  $width,
  $border-radius,
  $box-shadow,
  $color: var(--mat-sys-on-primary),
  $background: var(--mat-sys-primary),
  $cursor: pointer
) {
  color: $color !important;
  height: $height;
  width: $width;
  border: none;
  justify-content: start;
  border-radius: $border-radius;
  background: $background !important;
  box-shadow: $box-shadow;
  cursor: $cursor;
}

@mixin button-hover($background, $box-shadow) {
  &:hover {
    background: $background;
    box-shadow: $box-shadow;
    transition:
      background 400ms,
      box-shadow 400ms;
  }
}

.login-btn {
  text-decoration: none;
  color: var(--mat-sys-on-primary);
  padding: 10px;
  border-radius: $button-border-radius;
  background: var(--mat-sys-primary);

  &:hover {
    box-shadow: var(--box-shadow-blue-inset);
    background: var(--background-blue-inset);
    transform: translateY(2px);
  }
}

.login-actions {
  display: flex;
  gap: 16px; // Sets the space between the buttons
  width: 100%;

  > .login-btn {
    // When both buttons are shown, this one takes ~70% of the space.
    // When only this button is shown, it takes 100% of the space.
    flex: 7;
    min-width: 0; // Prevents buttons from overflowing when the container is narrow
  }

  > .reset-btn {
    flex: 3; // Takes ~30% of the space when shown.
    min-width: 0;
  }
}

.passkey-btn {
  text-decoration: none;
  color: var(--mat-sys-on-surface-variant);
  padding: 10px;
  border-radius: $button-border-radius;
  background: linear-gradient(145deg, var(--mat-sys-surface-container), var(--mat-sys-surface-container-low));

  &:hover {
    box-shadow: var(--box-shadow-inset);
    background: linear-gradient(145deg, var(--mat-sys-surface-container-lowest), var(--mat-sys-surface-container-low));
    transform: translateY(2px);
  }
}

.reset-btn {
  text-decoration: none;
  color: var(--mat-sys-on-surface-variant);
  padding: 10px;
  border-radius: $button-border-radius;
  background: linear-gradient(145deg, var(--mat-sys-surface-container), var(--mat-sys-surface-container-low));

  &:hover {
    box-shadow: var(--box-shadow-inset);
    background: linear-gradient(145deg, var(--mat-sys-surface-container-lowest), var(--mat-sys-surface-container-low));
    transform: translateY(2px);
  }
}

.support-btn {
  height: var(--header-height);
  margin: 0;
  border: none;
  box-shadow: none;
  border-radius: 0;
  background: var(--background-green-brand);
  cursor: pointer;
  color: white;

  &.active,
  &:hover {
    box-shadow: none;
    background: var(--background-green-brand);
    color: white;
    transform: translateX(2px);
  }
}

.card-button {
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $box-shadow: var(--box-shadow-blue)
  );
  @include button-hover(var(--background-blue-inset), var(--box-shadow-blue-inset));
}

.card-button-reset {
  min-width: 240px;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-green),
    $box-shadow: var(--box-shadow-green)
  );
}

.card-button-active {
  min-width: 240px;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-blue-inset),
    $box-shadow: var(--box-shadow-blue-inset)
  );
}

.card-button-disabled {
  min-width: 240px;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-gray),
    $color: var(--mat-sys-on-surface),
    $box-shadow: var(--box-shadow-gray)
  );
}

.card-button-delete {
  min-width: 240px;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-red),
    $box-shadow: var(--box-shadow-red)
  );
  transition: 0ms;

  &.active,
  &:hover {
    background: var(--background-red-inset);
    box-shadow: var(--box-shadow-red-inset);
    transition:
      background 400ms,
      box-shadow 400ms;
  }
}

.card-button-activate {
  min-width: 240px;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-green),
    $box-shadow: var(--box-shadow-green)
  );
  transition: 0ms;

  &.active,
  &:hover {
    background: var(--background-green-inset);
    box-shadow: var(--box-shadow-green-inset);
    transition:
      background 400ms,
      box-shadow 400ms;
  }
}

.detail-button {
  min-width: 240px;
  color: white;
  @include button-base(
    $height: $button-height,
    $width: $button-width,
    $border-radius: $button-border-radius,
    $background: var(--background-blue),
    $box-shadow: var(--box-shadow-blue)
  );
  @include button-hover(var(--background-blue-inset), var(--box-shadow-blue-inset));
}

.detail-button-icon {
  vertical-align: bottom;
  margin-bottom: $margin-bottom-small;
  font-size: $detail-icon-font-size;
}

.delete-buttons-container {
  display: flex;
  flex-direction: column;
  gap: $button-gap-small;
  padding: 0 $padding-horizontal;
}

.dialog-button-delete {
  color: var(--red-base);
  background-color: white;
}

.cancel-button {
  color: var(--red-base);
  background-color: white;
  cursor: pointer;
}

.keyword-button,
.more-keyword-button {
  background-color: var(--mat-sys-surface-container-low);
  border-radius: $button-border-radius;
  height: $keyword-height;
  margin: 3px;
  box-shadow: none;
  color: var(--mat-sys-on-surface-variant);

  &.keyword-button {
    padding: $keyword-padding;

    &:hover .add-keyword {
      color: var(--green-light);
    }
  }

  &.more-keyword-button {
    padding: 0 0 0 8px;
  }
}

.keyword-button-icon {
  font-size: $keyword-font-size;
  vertical-align: bottom;
  margin-right: 0;
  align-items: center;
  display: flex;
  justify-content: center;
}

.add-keyword {
  color: var(--grey-light-active);
}

.remove-keyword {
  color: var(--red-light);
}

.change-keyword {
  color: var(--yellow-light);
}

.delete-info-button {
  margin-top: 16px;
}

.refresh-btn {
  width: var(--header-height);
  height: var(--header-height);
  cursor: pointer;
  border-radius: 0;
  background-color: transparent;
  color: var(--mat-sys-on-surface-variant);
  box-shadow: none !important;
  transition: background-color 0.2s ease-in-out;

  &:hover {
    background-color: var(--mat-sys-surface-container);
  }
}

.enroll-button-container {
  display: flex;
  flex-direction: row;
  justify-content: left;
  gap: var(--global-gap);
  flex: 1;
}

.enroll-button-spacer {
  width: 40px;
  height: 40px;
}

.profile-btn {
  height: var(--header-height);
  justify-content: start;
  border: none;
  border-radius: 0;
  background: $profile-bg;
  cursor: pointer;
  box-shadow: none;
  color: white !important;

  &.active,
  &:hover {
    box-shadow: none;
    background: $profile-hover-bg;
    color: white;
    transform: translateX(2px);
  }
}

.logout-btn {
  color: var(--mat-sys-on-surface-variant);
  background-color: transparent;
  transition: background-color 0.2s ease-in-out;

  &:hover {
    background-color: var(--mat-sys-surface-container);
  }
}

.drawer-button {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--mat-sys-surface-container-lowest);
  height: 48px;
  width: 48px;
  color: var(--mat-sys-on-surface);
  border-radius: calc(var(--border-radius) * 4);
  @include mat.elevation(5);
}

.back-button {
  @extend .drawer-button;
  margin: 32px 16px 0 16px;

  &:hover {
    @include mat.elevation(8);
  }
}

.mdi--folder-search {
  display: inline-block;
  width: 1em;
  height: 1em;
  --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M16.5 12c2.5 0 4.5 2 4.5 4.5c0 .88-.25 1.71-.69 2.4l3.08 3.1L22 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5m0 2a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5M9 4l2 2h8a2 2 0 0 1 2 2v3.81A6.48 6.48 0 0 0 16.5 10a6.5 6.5 0 0 0-6.5 6.5c0 1.29.37 2.5 1 3.5H3a2 2 0 0 1-2-2V6c0-1.11.89-2 2-2z'/%3E%3C/svg%3E");
  background-color: currentColor;
  -webkit-mask-image: var(--svg);
  mask-image: var(--svg);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
}

.mdi--list-lock {
  display: inline-block;
  width: 1em;
  height: 1em;
  background-color: currentColor;

  --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M 3 4 h 14 v 2 H 3 V 4 M 3 8 h 9 v 2 H 3 V 8 M 3 12 h 7 v 2 H 3 v -2'/%3E%3Cg transform='translate(13 4)'%3E%3Cpath fill='%23000' d='M 6 8 h 0 V 7 a 3 3 0 0 0 -6 0 v 3 H 0 a 2 2 0 0 0 -2 2 v 5 a 2 2 0 0 0 2 2 h 6 a 2 2 0 0 0 2 -2 v -5 a 2 2 0 0 0 -2 -2 Z m -4 2 V 7 a 1 1 0 0 1 2 0 v 3 Z'/%3E%3C/g%3E%3C/svg%3E");

  -webkit-mask-image: var(--svg);
  mask-image: var(--svg);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
}

.theme-mode-button {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--mat-sys-surface-container-lowest);
  margin: var(--the-mode-button-margin-px);
  height: calc(var(--header-height) / 3);
  width: calc(var(--header-height) / 3);
  color: var(--mat-sys-on-surface);
  border-radius: calc(var(--border-radius) / 4);
  @include mat.elevation(5);

  &:hover {
    @include mat.elevation(8);
    background: var(--mat-sys-surface-container-low);
    color: var(--mat-sys-on-surface-variant);
  }

  &:active {
    transform: scale(0.98);
    background: var(--mat-sys-surface-container-lowest);
    color: var(--mat-sys-on-surface);
  }
}

.theme-mode-button-icon {
  font-size: calc(var(--header-height) / 3 - 2px);
  color: var(--mat-sys-on-surface);
  width: calc(var(--header-height) / 3 - 2px);
  height: calc(var(--header-height) / 3 - 2px);
}
