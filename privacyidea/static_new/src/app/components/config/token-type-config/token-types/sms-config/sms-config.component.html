<!--
 (c) NetKnights GmbH 2026,  https://netknights.it

 This code is free software; you can redistribute it and/or
 modify it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE
 as published by the Free Software Foundation; either
 version 3 of the License, or any later version.

 This code is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU AFFERO GENERAL PUBLIC LICENSE for more details.

 You should have received a copy of the GNU Affero General Public
 License along with this program.  If not, see <http://www.gnu.org/licenses/>.

 SPDX-License-Identifier: AGPL-3.0-or-later
-->
<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title i18n>SMS Token Settings</mat-panel-title>
  </mat-expansion-panel-header>
  <div class="panel-content">
    <p i18n>The SMS Token is an event based token. After the user has tried to authenticate with the OTP PIN, an SMS
            with an OTP value is sent to the users mobile phone. Then user can authenticate with this OTP value in a
            second step.
    </p>
    <p i18n>Here you can define how the SMS will be sent - via which kind of gateway.</p>

    <mat-form-field
      appearance="fill">
      <mat-label i18n>SMS Gateway configuration</mat-label>
      <mat-select [(ngModel)]="formData()['sms.identifier']">
        @for (gateway of smsGateways(); track gateway) {
          <mat-option [value]="gateway">{{ gateway }}</mat-option>
        }
      </mat-select>
      <mat-hint i18n>Select a predefined
        <a
          [routerLink]=[ROUTE_PATHS.EXTERNAL_SERVICES_SMS]><strong>SMS Gateway configuration</strong>.
        </a>
      </mat-hint>
    </mat-form-field>

    <mat-form-field
      appearance="fill">
      <mat-label i18n>OTP validity time</mat-label>
      <input
        [(ngModel)]="formData()['sms.providerTimeout']"
        matInput
        placeholder="300"
        type="number">
      <mat-hint i18n>The time in seconds for which the sent OTP value is valid for authentication.</mat-hint>
    </mat-form-field>

    <h4 i18n>Obsolete settings</h4>
    <mat-form-field
      appearance="fill">
      <mat-label i18n>SMS Provider</mat-label>
      <input
        [value]="providerName()"
        disabled
        matInput>
    </mat-form-field>

    <mat-form-field
      appearance="fill">
      <mat-label i18n>Provider Config</mat-label>
      <textarea
        [(ngModel)]="formData()['sms.providerConfig']"
        disabled
        matInput
        placeholder="{'USERNAME': 'Your User',\n 'PASSWORD': 'Your Password'}"
        rows="6"></textarea>
    </mat-form-field>
  </div>
</mat-expansion-panel>
