<h2 mat-dialog-title>Token successfully enrolled</h2>
<mat-dialog-content>
  <div class="margin-bottom-1">
  <span>The token was successfully enrolled with serial number
    <a (click)="tokenSelected(serial)"> {{ serial }} </a>.</span>
    @if (containerSerial) {
      <br />
      <span>It has been enrolled in the container
      <a (click)="containerSelected(containerSerial)">
        {{ containerSerial }} </a>.</span>
    }
    @if (data.user?.username && data.userRealm != "" && !data.onlyAddToRealm) {
      <br />
      <span>The user <span>{{ data.user!.username }}</span> in the realm <span>{{ data.userRealm }}</span> was assigned
      to the token.
    </span>
    }
  </div>
  <div class="flex-row gap-1">
    @if (showQRCode() && qrCode) {
      <img
        alt="QR Code"
        height="300px"
        src="{{ qrCode }}"
        width="300px" />
    }
    <div class="flex-column gap-1">
      @if (url && showQRCode()) {
        <app-qr-code-text
          [tokenType]="data.tokentype.key"
          [url]="url" />
      }
      @if (url && showRegenerateButton()) {
        <button
          (click)="regenerateQRCode()"
          class="card-button"
          mat-flat-button>
          <mat-icon>autorenew</mat-icon>
          Regenerate {{ regenerateButtonText() }}
        </button>
      }

      @if (data.response.detail["password"]) {
        <p>
          Your Password: <strong>{{ data.response.detail["password"] }}</strong>.
        </p>
      }

      @if (data.response.detail.otpkey?.value && !data.response.detail["otps"] && showQRCode()) {
        <app-otp-key
          [otpKeyHex]="data.response.detail.otpkey?.value ?? ''"
          [otpKeyBase32]="data.response.detail.otpkey?.value_b32 ?? ''" />
      }

      @if (data.tokentype.key === "tiqr") {
        <app-tiqr-enroll-url [url]="data.response.detail['tiqrenroll']?.value ?? ''" />
      }

      @if (data.tokentype.key === "registration") {
        <app-registration-code [registrationCode]="data.response.detail['registrationcode']" />
      }

      @if (data.response.detail["otps"]) {
        <app-otp-values
          [otpValues]="data.response.detail['otps']" />
      }
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions>
  <button
    mat-button
    mat-dialog-close>
    Close
  </button>
</mat-dialog-actions>
