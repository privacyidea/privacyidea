<div aria-label="Token Get Serial" class="token-get-serial">
  <div class="token-get-serial-container">
    <h3 class="margin-left-1">Get Serial Number</h3>
    <p class="help-block" translate>
      By entering an OTP value you can get the serial number of the token. You
      can also enter additional optional parameters, to narrow down the search
      for the token. So you can only search within certain token types or in
      assigned or unassigned tokens.
    </p>
    <h4 class="enroll-h4" translate>OTP Value</h4>
    <div class="flex-row gap-1">
      <mat-form-field class="width-100">
        <input
          #otpValueInput
          matInput
          (keydown.enter)="onPressEnter(otpValueInput)"
          [(ngModel)]="otpValue"
          id="otpValue"
          name="otpValue"
          placeholder="Enter some OTP value"
          required />
        <mat-error>OTP value must not be empty!</mat-error>
      </mat-form-field>
      <button
        (click)="onPressEnter(otpValueInput)"
        class="card-button"
        mat-flat-button>
        <mat-icon>play_arrow</mat-icon>
        Run Search
      </button>
    </div>
    <h4 class="enroll-h4" translate>Token Type</h4>
    <mat-form-field class="width-100">
      <mat-select
        (keydown.enter)="onPressEnter(otpValueInput)"
        [(ngModel)]="tokenType"
        appearance="outline"
        matInput
        placeholder="Select token type">
        @for (type of tokenTypes; track type) {
          <mat-option [value]="type['key']">{{ type["info"] }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
    <h4 class="enroll-h4" translate>Assignment State</h4>
    <mat-form-field class="width-100">
      <mat-select
        (keydown.enter)="onPressEnter(otpValueInput)"
        [(ngModel)]="assignmentState"
        appearance="outline"
        matInput
        placeholder="Specify assignment state">
        @for (assignment of assignmentStates; track assignment) {
          <mat-option [value]="assignment.key" translate
            >{{ assignment.info }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
    <div class="flex-row gap-1">
      <div class="flex-column width-66">
        <h4 class="enroll-h4" translate>Serial Substring</h4>
        <mat-form-field class="width-100">
          <input
            (keydown.enter)="onPressEnter(otpValueInput)"
            [(ngModel)]="serialSubstring"
            id="serialSubstring"
            matInput
            name="serialSubstring"
            placeholder="Enter optional serial substring" />
        </mat-form-field>
      </div>
      <div class="flex-column width-33">
        <h4 class="enroll-h4" translate>Count Window</h4>
        <mat-form-field>
          <input
            (keydown.enter)="onPressEnter(otpValueInput)"
            [(ngModel)]="countWindow"
            id="countWindow"
            matInput
            name="countWindow"
            placeholder="Lookahead OTP values"
            type="number" />
          <mat-hint>Set number of lookahead OTP values (default 10).</mat-hint>
        </mat-form-field>
      </div>
    </div>
  </div>
  <div class="token-get-serial-footer"></div>
</div>
