<!--
  (c) NetKnights GmbH 2026,  https://netknights.it

  This code is free software; you can redistribute it and/or
 modify it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE
 as published by the Free Software Foundation; either
 version 3 of the License, or any later version.

 This code is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU AFFERO GENERAL PUBLIC LICENSE for more details.

 You should have received a copy of the GNU Affero General Public
 License along with this program.  If not, see <http://www.gnu.org/licenses/>.

 SPDX-License-Identifier: AGPL-3.0-or-later
 -->

<app-dialog-wrapper
  class="dialog-content"
  [title]="'Edit Policy'"
  (close)="close()"
  [actions]="actions"
  (onAction)="onAction($event)">
  <div class="priority-description">
    <app-policy-priority
      [editMode]="true"
      [priority]="editedPolicy().priority"
      (priorityChange)="updatePolicyPriority($event)" />
    <app-policy-description
      [isEditMode]="true"
      [policy]="editedPolicy()"
      (policyEdit)="addPolicyEdit($event)" />
  </div>
  <div class="tab-buttons">
    <button
      mat-stroked-button
      class="action-button-1"
      [class.action-button-active]="activeTab() === 'actions'"
      (click)="setActiveTab('actions')">
      ACTIONS
    </button>
    <button
      mat-stroked-button
      class="action-button-1"
      [class.action-button-active]="activeTab() === 'conditions'"
      (click)="setActiveTab('conditions')">
      CONDITIONS
    </button>
  </div>

  @if (activeTab() === "actions") {
    <app-action-tab
      [isEditMode]="true"
      [policy]="editedPolicy()"
      (actionsUpdate)="updateActions($event)" />
  }
  @if (activeTab() === "conditions") {
    <app-conditions-tab
      [isEditMode]="true"
      [policy]="editedPolicy()!"
      (policyEdit)="addPolicyEdit($event)" />
  }
</app-dialog-wrapper>
