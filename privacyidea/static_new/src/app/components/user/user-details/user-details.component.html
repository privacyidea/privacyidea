<div
  appScrollToTop
  aria-label="Details"
  class="details-container"
  i18n-aria-label>
  <div class="details-header">
    <h3 i18n>Details for User:</h3>
    <h3 style="color: var(--mat-sys-primary)">{{ userService.detailsUsername() }}</h3>
    <h3>in Realm {{ userService.selectedUserRealm() }}</h3>
  </div>
  <div class="user-details">
    <div class="flex-row user-details-grid">
      <div
        class="label"
        i18n>Username
      </div>
      <div class="value">{{ userData().username || "-" }}</div>

      <div
        class="label"
        i18n>Given name
      </div>
      <div class="value">{{ userData().givenname || "-" }}</div>

      <div
        class="label"
        i18n>Surname
      </div>
      <div class="value">{{ userData().surname || "-" }}</div>

      <div
        class="label"
        i18n>Description
      </div>
      <div class="value">{{ userData().description || "-" }}</div>
    </div>

    <div class="user-details-column">
      <div
        class="label"
        i18n>Email
      </div>
      <div class="value">{{ userData().email || "-" }}</div>

      <div
        class="label"
        i18n>Phone
      </div>
      <div class="value">{{ userData().phone || "-" }}</div>

      <div
        class="label"
        i18n>Mobile
      </div>
      <div class="value">{{ userData().mobile || "-" }}</div>
    </div>
    <h3 class="margin-top-0" i18n>Custom Attributes:</h3>
  </div>
  <app-user-details-token-table />
  <div class="flex-row filter-pageinator-container">
    <mat-form-field class="width-66">
      <mat-label i18n>Assign Token to User</mat-label>
      <app-clearable-input
        (onClick)="tokenService.clearFilter()"
        [showClearButton]="tokenService.tokenFilter().isNotEmpty">
        <input
          #filterHTMLInputElement
          #tokenAutoTrigger="matAutocompleteTrigger"
          (input)="tokenService.handleFilterInput($event)"
          [matAutocomplete]="tokenAuto"
          [value]="tokenService.tokenFilter().filterString"
          i18n-placeholder
          matInput
          placeholder="Example query: 'type: hotp serial: 123'" />
      </app-clearable-input>
      <mat-autocomplete #tokenAuto="matAutocomplete">
        @for (option of tokenDataSource().data; track option) {
          <mat-option
            (click)="assignUserToToken(option)"
            class="token-option">
            <span class="token-option-span"> {{ option["serial"] }} </span>
            <span class="token-option-span">
                    {{ option["tokentype"] }}
                  </span>
            <span
              [ngClass]="option['active'] ? 'highlight-true' : 'highlight-false'"
              class="token-option-span"
              i18n>
                    {{ option["active"] ? "active" : "deactivated" }}
                  </span>
            <span class="token-option-span">
                    {{ option["username"] }}
                  </span>
            <mat-icon>add</mat-icon>
          </mat-option>
        }
      </mat-autocomplete>
    </mat-form-field>
    <mat-paginator
      (page)="onPageEvent($event)"
      [hidePageSize]="true"
      [length]="total()"
      [pageIndex]="pageIndex()"
      [pageSize]="pageSize()"/>
  </div>
  <app-user-details-container-table />
</div>