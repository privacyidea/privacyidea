@if (!isEditMode()) {
  <div class="preset-buttons-container">
    <span
      class="preset-label"
      i18n>Presets:</span>
    <div class="preset-buttons">
      @for (preset of sqlPresets; track preset.name) {
        <button
          (click)="applySqlPreset(preset)"
          mat-stroked-button
          type="button">
          {{ preset.name }}
        </button>
      }
    </div>
  </div>
}

<div class="type-sections-container">
  <div class="type-section">
    <h3 i18n>Database Connection</h3>
    <div class="form-grid">
      <mat-form-field class="field-lg">
        <mat-label i18n>Driver</mat-label>
        <input
          [formControl]="driverControl"
          matInput
          placeholder="mysql+pymysql"
          required />
        @if (driverControl.hasError('required') && driverControl.touched) {
          <mat-error i18n>Driver is <strong>required</strong>.</mat-error>
        }
      </mat-form-field>

      <mat-form-field class="field-lg">
        <mat-label i18n>Database</mat-label>
        <input
          [formControl]="databaseControl"
          matInput
          placeholder="YourDatabase" />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Server</mat-label>
        <input
          [formControl]="serverControl"
          matInput
          placeholder="127.0.0.1"
          required />
        @if (serverControl.hasError('required') && serverControl.touched) {
          <mat-error i18n>Server is <strong>required</strong>.</mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Port</mat-label>
        <input
          [formControl]="portControl"
          matInput
          placeholder="3306" />
      </mat-form-field>
    </div>
  </div>

  <div class="type-section">
    <h3 i18n>Authentication & Params</h3>
    <div class="form-grid">
      <mat-form-field>
        <mat-label i18n>User</mat-label>
        <input
          [formControl]="userControl"
          matInput
          placeholder="user" />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Password</mat-label>
        <input
          [formControl]="passwordControl"
          matInput
          placeholder="topsecret"
          type="password" />
      </mat-form-field>

      <div class="flex-column">
        <mat-checkbox
          [formControl]="editableControl"
          i18n>
          Edit user store
        </mat-checkbox>
        <span
          class="hint"
          i18n>The user data in this database can be modified from within privacyIDEA.</span>
      </div>

      @if (editableControl.value) {
        <mat-form-field class="field-lg">
          <mat-label i18n>Password Hash for editable users</mat-label>
          <input
            [formControl]="passwordHashTypeControl"
            matInput
            placeholder="">
          <mat-hint i18n>
            The hashing algorithm for the passwords of newly created users. Can be PHPASS, SHA, SSHA, SSHA256, SHA512,
            OTRS.
          </mat-hint>
        </mat-form-field>
      }
    </div>
  </div>
</div>

<div class="type-sections-container">
  <div class="type-section section-full">
    <h3 i18n>Table, Mapping, Pool & Editable</h3>
    <div class="form-grid">
      <mat-form-field>
        <mat-label i18n>Table</mat-label>
        <input
          [formControl]="tableControl"
          matInput
          placeholder="Users"
          required />
        @if (tableControl.hasError('required') && tableControl.touched) {
          <mat-error i18n>Table is <strong>required</strong>.</mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Limit</mat-label>
        <input
          [formControl]="limitControl"
          matInput
          placeholder="500"
          required
          type="number" />
        @if (limitControl.hasError('required') && limitControl.touched) {
          <mat-error i18n>Limit is <strong>required</strong>.</mat-error>
        }
      </mat-form-field>

      <mat-form-field class="field-lg">
        <mat-label i18n>Mapping</mat-label>
        <textarea
          [formControl]="mapControl"
          matInput
          placeholder='{"userid":"id","username":"user","phone":"telephoneNumber","mobile":"mobile","email":"mail","surname":"sn","givenname":"givenName","password":"password"}'
          required></textarea>
        @if (mapControl.hasError('required') && mapControl.touched) {
          <mat-error i18n>Mapping is <strong>required</strong>.</mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Connection Parameters</mat-label>
        <input
          [formControl]="conParamsControl"
          matInput />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Database Encoding</mat-label>
        <input
          [formControl]="encodingControl"
          matInput />
      </mat-form-field>

      <mat-form-field class="field-lg">
        <mat-label i18n>Where statement</mat-label>
        <input
          [formControl]="whereControl"
          matInput />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Pool size</mat-label>
        <input
          [formControl]="poolSizeControl"
          matInput
          type="number" />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Pool timeout</mat-label>
        <input
          [formControl]="poolTimeoutControl"
          matInput
          type="number" />
      </mat-form-field>

      <mat-form-field>
        <mat-label i18n>Pool recycle timeout</mat-label>
        <input
          [formControl]="poolRecycleControl"
          matInput
          type="number" />
      </mat-form-field>
    </div>
  </div>
</div>